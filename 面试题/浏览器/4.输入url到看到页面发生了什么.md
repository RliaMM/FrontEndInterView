# 输入 url 到看到页面发生了什么

## 总

浏览器是多进程的，每个页面是一个进程
浏览器进程：输入 URL 地址获取到地址，开启新的进程
网络进程，发起资源请求，获取到文件交给渲染进程
渲染进程：解析并渲染文件

## 网络进程 （网络七层模型）

### 缓存资源

- 请求资源，先去检查浏览器缓存，存在着直接返回资源

### 应用层： 域名解析

- 看域名是否被解析，通过 DNS 协议将域名解析成 IP 地址（过程基于 UDP）
  - URL 找到先找浏览器缓存，没有找本机缓存，没有找 HOST，在没有找 DNS 域名服务找到，中间可能经过路由缓存
  - HTTP 生成请求报文 请求行 空行 请求主体

### 传输层

- 请求如果是 HTTPS 的话需要进行 TLS 协商
- 建立 TCP 通信连接，进行三次握手
- 利用 TCP 传输数据包（可靠、有序），服务器按照顺序来收
- 默认不会断开 keep-alive 复用上次链接

### 其他层

- 网络层：路由转发找到对应服务器 物理 MAC 地址
- 物理链路层：通过物理设备

### 服务器

- 服务器收到数据
  - 负载均衡 HTTP 复用
- HTTP 响应报文
- 缓存设置

## 渲染进程

- GUI 渲染线程

  - HTML 解析成 DOM Tree， CSS 解析成 CSSOM，合成 RenderTree，计算布局 render,然后绘制渲染

- JS 引擎解析线程
  - EventLoop 作用域链 变量提升 回收机制 垃圾回收 作用域链 原型链
