# http 和 https 的区别

http 基于 TCP 协议 传输控制协议
https 基于 TLS 协议，传输层安全协议

http 有一些缺点
端口号：80 https 443
窃听：明文传输
篡改：代理商中间人劫持修改
认证：客户端服务器伪装，海量攻击请求

## 加密介绍

https 加密使用的加密套件
主要有：对称加密、非对称加密、椭圆 ECC、rsa hash 加密

### 对称加密：

- 用于数据传输阶段
- 服务器、客户端端共享一个密钥，密钥劫持，故怎样加密密钥，

### 非对称加密：

- 服务器将自己信息 hash 和公钥，用自己私钥生成一个签名，给 CA 结构，CA 机构用自己私钥给它发一个签名
- 私钥加密公钥解，公钥加密，私钥验证，将

## https 加密过程

客户端发送一个 clinet hello， 以及自己支持的加密套件
服务器发送一个 clinet heelo , 选中一个客户端提供的加密套件
服务器发送自己 ca 机构颁发的证书
客户端获取到证书，验证签名，取出 服务器公钥

服务器发送一个 DH 随机参数(用私钥加密 rsa 非对称加密)，签名
客户端拿到服务器 DH，进行验签，证明参数是服务器给的
客户端发送一个 DH 随机参数，发送给服务器
两端都有 DH 参数，互相计算出一个预主密钥

通过这个相同的密钥进行传输(对称加密)

## 数据上有安全性考虑吗，比如存储，比如说加密，秘钥生成，保存，加密解密，对 md5 使用吗，理解 md5 吗，唯一不可逆，断点上传，密码的保存，md5，加密，hash 一下

密码: rsa 双层 md5

https://zhuanlan.zhihu.com/p/43789231

## 对称加密问题(为什么要用对称加密+非对称加密)

因为一个相同钥匙，在网络上传输，实际上等于明文，中间人可以获取到密钥进行传输

## 非对称加密(为什么不能只用非对称加密)

- 客户端发送给服务器：客户端用(服务器的公钥)加密，服务器用自己私钥解开
- 服务器发送给客户端：服务器用(客户端的公钥)加密，客户端用自己私钥解开
  带来重要问题：耗时间，

## 非对称加密+对称加密(为什么需要数字证书)

- 非堆成：客户端发送给服务器：客户端用(服务器的公钥)加密自己的密钥，服务器用自己私钥解开的到密钥
- 对称加密：用密钥进行加密传输

带来的问题：有可能出现狸猫换太子，根本原因是浏览器**无法确认收到的公钥是不是网站自己**的

- 中间人劫持到公钥 A，保存下来，把数据包中的公钥 A 替换成自己伪造的公钥 B（它当然也拥有公钥 B 对应的私钥 B’）
- 中间人劫持后用私钥 B’解密得到密钥 X，再用公钥 A 加密后传给服务器。
- 服务器拿到后用私钥 A’ 解密得到密钥 X

## 为什么需要数字签名
