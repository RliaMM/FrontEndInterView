<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>throttle</title>
</head>
<body>
  <button id="throttleBtn">点击</button>
</body>
<script>
  const myFn = () => {
    console.log('click throttle')
  }
  const throttle = (fn, wait, { leading = false, trailing = false }) => {
    let timer = null;
    let previous = 0;
    return function(args) {
      let now = Date.now();
      if(!previous && leading === false) previous = now;
      const remaning = wait - (now - previous); 
      console.log(remaning, previous, '--')
      if (remaning <= 0) {
        if (timer) {
          clearTimeout(timer);
          timer = null;
        }
        previous = now;
        fn.apply(this, args);
      } else if(!timer && trailing !== false) {
        timer = setTimeout(() => {
          previous = leading === false ? 0 : Date.now();
          fn.apply(this, args);
        }, remaning)
      }
    }
  }
  const target = throttle(myFn, 1000, { leading: true, trailing: true });
  throttleBtn.addEventListener('click', target )
</script>
</html>